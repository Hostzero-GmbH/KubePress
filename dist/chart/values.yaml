## String to partially override chart.fullname template (will maintain the release name)
##
# nameOverride: ""

## String to fully override chart.fullname template
##
# fullnameOverride: ""

## Configure the controller manager deployment
##
manager:
  replicas: 1
  
  image:
    repository: ghcr.io/hostzero-gmbh/kubepress/controller
    pullPolicy: IfNotPresent

  ## Arguments
  ##
  args:
    - "--leader-elect"
    - "--metrics-bind-address=:8443"
    - "--health-probe-bind-address=:8081"

  ## Environment variables
  ##
  env:
    ENVIRONMENT: production # does nothing at the moment, but may be used in the future, set it to "production" to be safe
    TLS_CLUSTER_ISSUER: selfsigned-cluster-issuer # the name of the ClusterIssuer to be used for TLS certificates, must be created beforehand, this will be used for all ingresses created by Kubepress
    MARIADB_REPLICAS: "3" # Kubepress automatically creates a MariaDB Cluster, this variable defines how many replicas should be created
    STORAGE_CLASS_NAME: csi-cephfs-sc # the StorageClass to be used for PersistentVolumeClaims created by Kubepress, must be created beforehand, on those PVCs live the data of WordPress
    CILIUM_SHARING_KEY: "kubepress" # the sharing key to be used for Cilium's Shared IP feature, this will apply to all ingresses for the SFTP service
    CILIUM_REQUESTED_IPS: "10.101.254.110" # the IP address (or addresses) to be used for Cilium's Shared IP feature, this will apply to all service for the SFTP service, make sure that this IP is not in use
    PHPMYADMIN_DOMAIN: "phpmyadmin.hostzero.com" # the domain to be used for the phpMyAdmin instance, make sure that this domain points to your cluster


  ## Image pull secrets
  ##
  imagePullSecrets: []

  ## Pod-level security settings
  ##
  podSecurityContext:
    runAsNonRoot: true

  ## Container-level security settings
  ##
  securityContext:
    allowPrivilegeEscalation: false
    capabilities:
        drop:
            - ALL

  ## Resource limits and requests
  ##
  resources:
    limits:
        cpu: 500m
        memory: 128Mi
    requests:
        cpu: 10m
        memory: 64Mi

  ## Manager pod's affinity
  ##
  affinity: {}

  ## Manager pod's node selector
  ##
  nodeSelector: {}

  ## Manager pod's tolerations
  ##
  tolerations: []

## Helper RBAC roles for managing custom resources
##
rbacHelpers:
  # Install convenience admin/editor/viewer roles for CRDs
  enable: false

## Custom Resource Definitions
##
crd:
  # Install CRDs with the chart
  enable: true
  # Keep CRDs when uninstalling
  keep: true

## Controller metrics endpoint.
## Enable to expose /metrics endpoint with RBAC protection.
##
metrics:
  enable: true
  # Metrics server port
  port: 8443

## Cert-manager integration for TLS certificates.
## Required for webhook certificates and metrics endpoint certificates.
##
certManager:
  enable: false

## Prometheus ServiceMonitor for metrics scraping.
## Requires prometheus-operator to be installed in the cluster.
##
prometheus:
  enable: false

